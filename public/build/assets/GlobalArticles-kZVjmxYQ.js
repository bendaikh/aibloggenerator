import{y as W,r as v,u as $,g as l,a as w,d as i,h as N,w as A,b as e,i as g,o as r,f as x,p as B,t as c,e as k,k as h,v as z,z as U,m as H,n as V,F as M,x as I,A as K}from"./app-rFdqsBcZ.js";import{_ as O}from"./OrganizationLayout-BCkWj1tt.js";import"./AIJobsNotification-CdJSVoEF.js";const q={class:"p-8"},E={key:0,class:"bg-yellow-900/50 border border-yellow-500 text-yellow-200 px-6 py-4 rounded-lg mb-6"},J={class:"flex items-center justify-between"},Q={key:1,class:"bg-red-900/50 border border-red-500 text-red-200 px-6 py-4 rounded-lg mb-6"},R={class:"flex items-center gap-3"},X={key:2,class:"bg-emerald-900/50 border border-emerald-500 text-emerald-200 px-6 py-4 rounded-lg mb-6"},Y={class:"flex items-center gap-3"},Z={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ee={class:"lg:col-span-2 space-y-8"},te={class:"bg-[#1a1a1a] rounded-2xl border border-[#2a2a2a] p-8"},se={key:0,class:"mt-1 text-sm text-red-500"},oe={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},le={class:"flex items-end"},re={class:"flex items-center cursor-pointer"},ae={class:"space-y-4"},ie=["disabled"],ne={class:"flex flex-col items-center"},de={key:0,class:"w-12 h-12 bg-[#252525] rounded-lg flex items-center justify-center mb-3"},ue={key:1,class:"w-12 h-12 bg-[#252525] rounded-lg flex items-center justify-center mb-3"},ce={class:"text-white text-sm font-medium mb-1"},pe={key:0,class:"bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded-lg text-sm"},me={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},ge={class:"absolute -top-2 -right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity"},fe=["onClick"],be=["src","alt"],ve={class:"flex justify-end pt-4 border-t border-[#2a2a2a]"},xe=["disabled"],he={key:0,class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},ye={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},we={class:"lg:col-span-1"},ke={class:"bg-[#1a1a1a] rounded-2xl border border-[#2a2a2a] overflow-hidden sticky top-24"},Ce={class:"max-h-[500px] overflow-y-auto p-2"},_e={key:0,class:"p-8 text-center"},Ae={key:1,class:"space-y-1"},Me=["onClick"],je={class:"shrink-0"},Be={key:0,class:"w-5 h-5 bg-emerald-500 rounded flex items-center justify-center"},ze={key:1,class:"w-5 h-5 border-2 border-[#3a3a3a] rounded"},Ue={class:"w-8 h-8 rounded flex items-center justify-center shrink-0 overflow-hidden bg-[#252525]"},Ve=["src","alt"],Ie={key:1,class:"text-white text-xs font-bold bg-gradient-to-br from-amber-500 to-yellow-500 w-full h-full flex items-center justify-center"},Se={class:"flex-1 min-w-0"},Fe={class:"text-sm font-medium truncate"},De={__name:"GlobalArticles",props:{websites:{type:Array,default:()=>[]},hasApiKey:{type:Boolean,default:!1},defaultTone:{type:String,default:"conversational"}},setup(f){W();const C=f,n=v([]),y=v(!1),p=v(!1),b=v(""),m=v([]),o=$({topic:"",tone:C.defaultTone,length:"medium",keywords:"",auto_publish:!1,website_ids:[]}),S=async a=>{const t=Array.from(a.target.files||[]);t.length>0&&await j(t),a.target.value=""},F=async a=>{y.value=!1;const t=Array.from(a.dataTransfer?.files||[]);t.length>0&&await j(t)},j=async a=>{b.value="";const t=a.filter(d=>d.type.startsWith("image/"));if(t.length===0){b.value="No valid image files selected";return}p.value=!0;const s=[];for(const d of t)try{const u=new FormData;u.append("image",d),u.append("type","article");const _=await K.post("/upload/image",u,{headers:{"Content-Type":"multipart/form-data"}});_.data&&_.data.success?m.value.push(_.data.url):s.push(d.name+": Upload failed")}catch(u){console.error("Upload error:",u),s.push(d.name+": "+(u.response?.data?.message||u.message||"Upload failed"))}p.value=!1,s.length>0&&(b.value=s.join(", "))},G=a=>{m.value.splice(a,1)},L=a=>{const t=n.value.indexOf(a);t===-1?n.value.push(a):n.value.splice(t,1)},T=()=>{n.value=C.websites.map(a=>a.id)},D=()=>{n.value=[]},P=()=>{o.website_ids=n.value,o.transform(a=>({...a,featured_images:m.value})).post(route("organization.global-articles.generate"),{onSuccess:()=>{o.reset("topic","keywords"),o.tone=C.defaultTone,o.length="medium",o.auto_publish=!1,m.value=[],n.value=[]}})};return(a,t)=>(r(),l(M,null,[w(i(N),{title:"Global Article Generation"}),w(O,null,{default:A(()=>[e("div",q,[t[32]||(t[32]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-white mb-2"},"Global Article Generator"),e("p",{class:"text-gray-400"},"Generate an article once and push it automatically to multiple websites")],-1)),f.hasApiKey?g("",!0):(r(),l("div",E,[e("div",J,[t[8]||(t[8]=e("div",{class:"flex items-center gap-3"},[e("svg",{class:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("span",null,[e("strong",null,"OpenAI API key not configured."),x(" Please add your API key in Global Settings to use AI generation.")])],-1)),w(i(B),{href:a.route("organization.settings"),class:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg text-sm font-medium transition-colors"},{default:A(()=>[...t[7]||(t[7]=[x(" Go to Settings ",-1)])]),_:1},8,["href"])])])),i(o).errors.error?(r(),l("div",Q,[e("div",R,[t[9]||(t[9]=e("svg",{class:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,c(i(o).errors.error),1)])])):g("",!0),a.$page.props.flash?.success?(r(),l("div",X,[e("div",Y,[t[10]||(t[10]=e("svg",{class:"w-5 h-5 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",null,c(a.$page.props.flash.success),1)])])):g("",!0),e("div",Z,[e("div",ee,[e("div",te,[e("form",{onSubmit:k(P,["prevent"]),class:"space-y-6"},[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Article Topic * ",-1)),h(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i(o).topic=s),type:"text",required:"",placeholder:"e.g., 'Best Italian Pasta Recipes for Beginners'",class:"w-full px-4 py-3 bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg text-white focus:ring-2 focus:ring-emerald-500 text-lg"},null,512),[[z,i(o).topic]]),i(o).errors.topic?(r(),l("p",se,c(i(o).errors.topic),1)):g("",!0),t[12]||(t[12]=e("p",{class:"mt-1 text-xs text-gray-500"},"The AI will generate one article and push it to all selected websites.",-1))]),e("div",oe,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Article Length ",-1)),h(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>i(o).length=s),class:"w-full px-4 py-2 bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg text-white focus:ring-2 focus:ring-emerald-500"},[...t[13]||(t[13]=[e("option",{value:"short"},"Short (500-700 words)",-1),e("option",{value:"medium"},"Medium (1000-1500 words)",-1),e("option",{value:"long"},"Long (2000-3000 words)",-1)])],512),[[U,i(o).length]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Writing Tone ",-1)),h(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>i(o).tone=s),class:"w-full px-4 py-2 bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg text-white focus:ring-2 focus:ring-emerald-500"},[...t[15]||(t[15]=[e("option",{value:"conversational"},"Conversational",-1),e("option",{value:"professional"},"Professional",-1),e("option",{value:"casual"},"Casual",-1),e("option",{value:"friendly"},"Friendly",-1),e("option",{value:"formal"},"Formal",-1)])],512),[[U,i(o).tone]])]),e("div",le,[e("label",re,[h(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>i(o).auto_publish=s),type:"checkbox",class:"w-4 h-4 text-emerald-600 bg-[#0a0a0a] border-[#2a2a2a] rounded focus:ring-emerald-500"},null,512),[[H,i(o).auto_publish]]),t[17]||(t[17]=e("span",{class:"ml-2 text-sm text-gray-300"},"Auto-publish article",-1))])])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Keywords (Optional) ",-1)),h(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>i(o).keywords=s),type:"text",placeholder:"e.g., italian cuisine, pasta, cooking tips",class:"w-full px-4 py-2 bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg text-white focus:ring-2 focus:ring-emerald-500"},null,512),[[z,i(o).keywords]]),t[19]||(t[19]=e("p",{class:"mt-1 text-xs text-gray-500"},"Separate keywords with commas",-1))]),e("div",ae,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-300"}," Featured Images (Optional) ",-1)),t[25]||(t[25]=e("p",{class:"text-xs text-gray-500"},"Upload multiple images at once. These images will be distributed sequentially to the selected websites.",-1)),e("label",{for:"multipleImageUpload",onDragover:t[5]||(t[5]=k(s=>y.value=!0,["prevent"])),onDragleave:t[6]||(t[6]=k(s=>y.value=!1,["prevent"])),onDrop:k(F,["prevent"]),class:V(["border-2 border-dashed rounded-lg p-8 text-center transition-all block",p.value?"cursor-wait opacity-70":"cursor-pointer",y.value?"border-emerald-500 bg-emerald-900/20":"border-[#3a3a3a] hover:border-[#4a4a4a]"])},[e("input",{id:"multipleImageUpload",type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",multiple:"",class:"sr-only",onChange:S,disabled:p.value},null,40,ie),e("div",ne,[p.value?(r(),l("div",de,[...t[20]||(t[20]=[e("svg",{class:"animate-spin w-6 h-6 text-emerald-500",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(r(),l("div",ue,[...t[21]||(t[21]=[e("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])])),e("p",ce,c(p.value?"Uploading images...":"Drop multiple images here or click to browse"),1),t[22]||(t[22]=e("p",{class:"text-gray-500 text-xs"}," PNG, JPG, WebP up to 5MB each ",-1))])],34),b.value?(r(),l("div",pe,c(b.value),1)):g("",!0),m.value.length>0?(r(),l("div",me,[(r(!0),l(M,null,I(m.value,(s,d)=>(r(),l("div",{key:d,class:"relative group"},[e("div",ge,[e("button",{type:"button",onClick:u=>G(d),class:"w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center shadow-lg"},[...t[23]||(t[23]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,fe)]),e("img",{src:s,alt:`Featured image ${d+1}`,class:"w-full h-32 object-cover rounded-lg border border-[#3a3a3a]"},null,8,be)]))),128))])):g("",!0)]),e("div",ve,[e("button",{type:"submit",disabled:i(o).processing||!f.hasApiKey||n.value.length===0,class:"px-8 py-3 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[i(o).processing?(r(),l("svg",he,[...t[26]||(t[26]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(r(),l("svg",ye,[...t[27]||(t[27]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)])])),x(" "+c(i(o).processing?"Queueing...":"Generate & Push to "+n.value.length+" Websites"),1)],8,xe)])],32)])]),e("div",we,[e("div",ke,[e("div",{class:"p-6 border-b border-[#2a2a2a] bg-[#1f1f1f]"},[t[28]||(t[28]=e("h3",{class:"text-white font-bold flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})]),x(" Select Websites ")],-1)),e("div",{class:"flex items-center justify-between mt-4"},[e("button",{onClick:T,class:"text-xs text-emerald-400 hover:text-emerald-300 font-medium"},"Select All"),e("button",{onClick:D,class:"text-xs text-gray-500 hover:text-gray-400 font-medium"},"Clear All")])]),e("div",Ce,[f.websites.length===0?(r(),l("div",_e,[t[30]||(t[30]=e("p",{class:"text-gray-500 text-sm"},"No websites found.",-1)),w(i(B),{href:a.route("organization.websites.create"),class:"text-emerald-400 text-sm mt-2 inline-block"},{default:A(()=>[...t[29]||(t[29]=[x("Create your first website",-1)])]),_:1},8,["href"])])):(r(),l("div",Ae,[(r(!0),l(M,null,I(f.websites,s=>(r(),l("div",{key:s.id,onClick:d=>L(s.id),class:V(["flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all border",n.value.includes(s.id)?"bg-emerald-500/10 border-emerald-500/50 text-white":"bg-transparent border-transparent text-gray-400 hover:bg-[#252525] hover:text-white"])},[e("div",je,[n.value.includes(s.id)?(r(),l("div",Be,[...t[31]||(t[31]=[e("svg",{class:"w-3.5 h-3.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)])])):(r(),l("div",ze))]),e("div",Ue,[s.favicon_url?(r(),l("img",{key:0,src:s.favicon_url,alt:s.name,class:"w-full h-full object-cover"},null,8,Ve)):(r(),l("span",Ie,c(s.name.charAt(0).toUpperCase()),1))]),e("div",Se,[e("p",Fe,c(s.name),1)])],10,Me))),128))]))])])])])])]),_:1})],64))}};export{De as default};

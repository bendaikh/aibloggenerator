import{y as W,r as x,u as $,g as r,a as w,d as o,h as N,w as _,b as e,i as g,o as a,f as y,p as I,t as p,e as k,k as f,v as M,z,m as O,n as U,F as j,x as V,A as H}from"./app-BuU7h7AZ.js";import{_ as K}from"./OrganizationLayout-BayzC4Hm.js";import"./AIJobsNotification-SymnK7Qw.js";const E={class:"p-8"},q={key:0,class:"bg-yellow-900/50 border border-yellow-500 text-yellow-200 px-6 py-4 rounded-lg mb-6"},J={class:"flex items-center justify-between"},Q={key:1,class:"bg-red-900/50 border border-red-500 text-red-200 px-6 py-4 rounded-lg mb-6"},R={class:"flex items-center gap-3"},X={key:2,class:"bg-emerald-900/50 border border-emerald-500 text-emerald-200 px-6 py-4 rounded-lg mb-6"},Y={class:"flex items-center gap-3"},Z={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ee={class:"lg:col-span-2 space-y-8"},te={class:"bg-[#1a1a1a] rounded-2xl border border-[#2a2a2a] p-8"},se={key:0,class:"mt-1 text-sm text-red-500"},le={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},oe={class:"flex items-end"},re={class:"flex items-center cursor-pointer"},ae={class:"space-y-4"},ie=["disabled"],ne={class:"flex flex-col items-center"},de={key:0,class:"w-12 h-12 bg-[#252525] rounded-lg flex items-center justify-center mb-3"},ue={key:1,class:"w-12 h-12 bg-[#252525] rounded-lg flex items-center justify-center mb-3"},pe={class:"text-white text-sm font-medium mb-1"},ce={key:0,class:"bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded-lg text-sm"},me={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},ge={class:"absolute -top-2 -right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity"},fe=["onClick"],be=["src","alt"],ve={class:"flex justify-end pt-4 border-t border-[#2a2a2a]"},xe=["disabled"],ye={key:0,class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},he={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},we={class:"lg:col-span-1"},ke={class:"bg-[#1a1a1a] rounded-2xl border border-[#2a2a2a] overflow-hidden sticky top-24"},Ce={class:"max-h-[500px] overflow-y-auto p-2"},Ae={key:0,class:"p-8 text-center"},_e={key:1,class:"space-y-1"},Me=["onClick"],je={class:"shrink-0"},Be={key:0,class:"w-5 h-5 bg-emerald-500 rounded flex items-center justify-center"},Ie={key:1,class:"w-5 h-5 border-2 border-[#3a3a3a] rounded"},ze={class:"w-8 h-8 rounded flex items-center justify-center shrink-0 overflow-hidden bg-[#252525]"},Ue=["src","alt"],Ve={key:1,class:"text-white text-xs font-bold bg-gradient-to-br from-amber-500 to-yellow-500 w-full h-full flex items-center justify-center"},Se={class:"flex-1 min-w-0"},Fe={class:"text-sm font-medium truncate"},De={__name:"GlobalArticles",props:{websites:{type:Array,default:()=>[]},hasApiKey:{type:Boolean,default:!1},defaultTone:{type:String,default:"conversational"}},setup(b){W();const C=b,n=x([]),h=x(!1),c=x(!1),v=x(""),m=x([]),l=$({topic:"",tone:C.defaultTone,length:"medium",keywords:"",ingredients:"",auto_publish:!1,website_ids:[]}),S=async i=>{const t=Array.from(i.target.files||[]);t.length>0&&await B(t),i.target.value=""},F=async i=>{h.value=!1;const t=Array.from(i.dataTransfer?.files||[]);t.length>0&&await B(t)},B=async i=>{v.value="";const t=i.filter(d=>d.type.startsWith("image/"));if(t.length===0){v.value="No valid image files selected";return}c.value=!0;const s=[];for(const d of t)try{const u=new FormData;u.append("image",d),u.append("type","article");const A=await H.post("/upload/image",u,{headers:{"Content-Type":"multipart/form-data"}});A.data&&A.data.success?m.value.push(A.data.url):s.push(d.name+": Upload failed")}catch(u){console.error("Upload error:",u),s.push(d.name+": "+(u.response?.data?.message||u.message||"Upload failed"))}c.value=!1,s.length>0&&(v.value=s.join(", "))},G=i=>{m.value.splice(i,1)},L=i=>{const t=n.value.indexOf(i);t===-1?n.value.push(i):n.value.splice(t,1)},T=()=>{n.value=C.websites.map(i=>i.id)},D=()=>{n.value=[]},P=()=>{l.website_ids=n.value,l.transform(i=>({...i,featured_images:m.value})).post(route("organization.global-articles.generate"),{onSuccess:()=>{l.reset("topic","keywords","ingredients"),l.tone=C.defaultTone,l.length="medium",l.auto_publish=!1,m.value=[],n.value=[]}})};return(i,t)=>(a(),r(j,null,[w(o(N),{title:"Global Article Generation"}),w(K,null,{default:_(()=>[e("div",E,[t[35]||(t[35]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-white mb-2"},"Global Article Generator"),e("p",{class:"text-gray-400"},"Generate an article once and push it automatically to multiple websites")],-1)),b.hasApiKey?g("",!0):(a(),r("div",q,[e("div",J,[t[9]||(t[9]=e("div",{class:"flex items-center gap-3"},[e("svg",{class:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("span",null,[e("strong",null,"OpenAI API key not configured."),y(" Please add your API key in Global Settings to use AI generation.")])],-1)),w(o(I),{href:i.route("organization.settings"),class:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg text-sm font-medium transition-colors"},{default:_(()=>[...t[8]||(t[8]=[y(" Go to Settings ",-1)])]),_:1},8,["href"])])])),o(l).errors.error?(a(),r("div",Q,[e("div",R,[t[10]||(t[10]=e("svg",{class:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,p(o(l).errors.error),1)])])):g("",!0),i.$page.props.flash?.success?(a(),r("div",X,[e("div",Y,[t[11]||(t[11]=e("svg",{class:"w-5 h-5 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),e("span",null,p(i.$page.props.flash.success),1)])])):g("",!0),e("div",Z,[e("div",ee,[e("div",te,[e("form",{onSubmit:k(P,["prevent"]),class:"space-y-6"},[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Article Topic * ",-1)),f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o(l).topic=s),type:"text",required:"",placeholder:"e.g., 'Best Italian Pasta Recipes for Beginners'",class:"w-full px-4 py-3 bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg text-white focus:ring-2 focus:ring-emerald-500 text-lg"},null,512),[[M,o(l).topic]]),o(l).errors.topic?(a(),r("p",se,p(o(l).errors.topic),1)):g("",!0),t[13]||(t[13]=e("p",{class:"mt-1 text-xs text-gray-500"},"The AI will generate one article and push it to all selected websites.",-1))]),e("div",le,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Article Length ",-1)),f(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>o(l).length=s),class:"w-full px-4 py-2 bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg text-white focus:ring-2 focus:ring-emerald-500"},[...t[14]||(t[14]=[e("option",{value:"short"},"Short (500-700 words)",-1),e("option",{value:"medium"},"Medium (1000-1500 words)",-1),e("option",{value:"long"},"Long (2000-3000 words)",-1)])],512),[[z,o(l).length]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Writing Tone ",-1)),f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o(l).tone=s),class:"w-full px-4 py-2 bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg text-white focus:ring-2 focus:ring-emerald-500"},[...t[16]||(t[16]=[e("option",{value:"conversational"},"Conversational",-1),e("option",{value:"professional"},"Professional",-1),e("option",{value:"casual"},"Casual",-1),e("option",{value:"friendly"},"Friendly",-1),e("option",{value:"formal"},"Formal",-1)])],512),[[z,o(l).tone]])]),e("div",oe,[e("label",re,[f(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o(l).auto_publish=s),type:"checkbox",class:"w-4 h-4 text-emerald-600 bg-[#0a0a0a] border-[#2a2a2a] rounded focus:ring-emerald-500"},null,512),[[O,o(l).auto_publish]]),t[18]||(t[18]=e("span",{class:"ml-2 text-sm text-gray-300"},"Auto-publish article",-1))])])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Keywords (Optional) ",-1)),f(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o(l).keywords=s),type:"text",placeholder:"e.g., italian cuisine, pasta, cooking tips",class:"w-full px-4 py-2 bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg text-white focus:ring-2 focus:ring-emerald-500"},null,512),[[M,o(l).keywords]]),t[20]||(t[20]=e("p",{class:"mt-1 text-xs text-gray-500"},"Separate keywords with commas",-1))]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Ingredients (Optional) ",-1)),f(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>o(l).ingredients=s),rows:"4",placeholder:`e.g., 2 cups flour, 3 eggs, 1 cup milk, salt and pepper to taste

If left empty, AI will generate ingredients automatically.`,class:"w-full px-4 py-3 bg-[#0a0a0a] border border-[#2a2a2a] rounded-lg text-white focus:ring-2 focus:ring-emerald-500 resize-none"},null,512),[[M,o(l).ingredients]]),t[22]||(t[22]=e("p",{class:"mt-1 text-xs text-gray-500"},"Enter ingredients manually, or leave empty for AI to generate them",-1))]),e("div",ae,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-300"}," Featured Images (Optional) ",-1)),t[28]||(t[28]=e("p",{class:"text-xs text-gray-500"},"Upload multiple images at once. These images will be distributed sequentially to the selected websites.",-1)),e("label",{for:"multipleImageUpload",onDragover:t[6]||(t[6]=k(s=>h.value=!0,["prevent"])),onDragleave:t[7]||(t[7]=k(s=>h.value=!1,["prevent"])),onDrop:k(F,["prevent"]),class:U(["border-2 border-dashed rounded-lg p-8 text-center transition-all block",c.value?"cursor-wait opacity-70":"cursor-pointer",h.value?"border-emerald-500 bg-emerald-900/20":"border-[#3a3a3a] hover:border-[#4a4a4a]"])},[e("input",{id:"multipleImageUpload",type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",multiple:"",class:"sr-only",onChange:S,disabled:c.value},null,40,ie),e("div",ne,[c.value?(a(),r("div",de,[...t[23]||(t[23]=[e("svg",{class:"animate-spin w-6 h-6 text-emerald-500",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(a(),r("div",ue,[...t[24]||(t[24]=[e("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])])),e("p",pe,p(c.value?"Uploading images...":"Drop multiple images here or click to browse"),1),t[25]||(t[25]=e("p",{class:"text-gray-500 text-xs"}," PNG, JPG, WebP up to 5MB each ",-1))])],34),v.value?(a(),r("div",ce,p(v.value),1)):g("",!0),m.value.length>0?(a(),r("div",me,[(a(!0),r(j,null,V(m.value,(s,d)=>(a(),r("div",{key:d,class:"relative group"},[e("div",ge,[e("button",{type:"button",onClick:u=>G(d),class:"w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center shadow-lg"},[...t[26]||(t[26]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,fe)]),e("img",{src:s,alt:`Featured image ${d+1}`,class:"w-full h-32 object-cover rounded-lg border border-[#3a3a3a]"},null,8,be)]))),128))])):g("",!0)]),e("div",ve,[e("button",{type:"submit",disabled:o(l).processing||!b.hasApiKey||n.value.length===0,class:"px-8 py-3 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[o(l).processing?(a(),r("svg",ye,[...t[29]||(t[29]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(a(),r("svg",he,[...t[30]||(t[30]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)])])),y(" "+p(o(l).processing?"Queueing...":"Generate & Push to "+n.value.length+" Websites"),1)],8,xe)])],32)])]),e("div",we,[e("div",ke,[e("div",{class:"p-6 border-b border-[#2a2a2a] bg-[#1f1f1f]"},[t[31]||(t[31]=e("h3",{class:"text-white font-bold flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})]),y(" Select Websites ")],-1)),e("div",{class:"flex items-center justify-between mt-4"},[e("button",{onClick:T,class:"text-xs text-emerald-400 hover:text-emerald-300 font-medium"},"Select All"),e("button",{onClick:D,class:"text-xs text-gray-500 hover:text-gray-400 font-medium"},"Clear All")])]),e("div",Ce,[b.websites.length===0?(a(),r("div",Ae,[t[33]||(t[33]=e("p",{class:"text-gray-500 text-sm"},"No websites found.",-1)),w(o(I),{href:i.route("organization.websites.create"),class:"text-emerald-400 text-sm mt-2 inline-block"},{default:_(()=>[...t[32]||(t[32]=[y("Create your first website",-1)])]),_:1},8,["href"])])):(a(),r("div",_e,[(a(!0),r(j,null,V(b.websites,s=>(a(),r("div",{key:s.id,onClick:d=>L(s.id),class:U(["flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all border",n.value.includes(s.id)?"bg-emerald-500/10 border-emerald-500/50 text-white":"bg-transparent border-transparent text-gray-400 hover:bg-[#252525] hover:text-white"])},[e("div",je,[n.value.includes(s.id)?(a(),r("div",Be,[...t[34]||(t[34]=[e("svg",{class:"w-3.5 h-3.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)])])):(a(),r("div",Ie))]),e("div",ze,[s.favicon_url?(a(),r("img",{key:0,src:s.favicon_url,alt:s.name,class:"w-full h-full object-cover"},null,8,Ue)):(a(),r("span",Ve,p(s.name.charAt(0).toUpperCase()),1))]),e("div",Se,[e("p",Fe,p(s.name),1)])],10,Me))),128))]))])])])])])]),_:1})],64))}};export{De as default};
